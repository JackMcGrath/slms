{% extends 'ZerebralFrontendBundle::layout.html.twig' %}

{% macro getError(model, key) %}
    {% if key in model.getValidationFailures|keys %}
        {{ 'error' }}
    {% endif %}
{% endmacro %}

{% import _self as error %}

{% block content %}
    <div class="row-fluid">
        <div class="span12">
            <div class="row-fluid">
                <h2 class="span6 pull-left">Create New Assignment</h2>
            </div>
            <hr/>

            <form class="form-horizontal span10 create-form no-left-margin" method="post" action="{{ path("assignment_add") }}">
                {% for error in assignment.getValidationFailures  %}
                    <div class="alert alert-danger">
                        <a href="#" class="close" data-dismiss="alert">Ã—</a>
                        <strong>Warning!</strong> {{ error.message }}
                    </div>
                {% endfor %}

                <div class="control-group {{ error.getError(assignment, 'assignments.name') }}">
                    <label class="control-label">Title</label>
                    <div class="controls">
                        <input type="text" placeholder="Title..." class="input-xlarge" value="{{ assignment.getName }}" name="name">
                        <span class="help-inline">e.g. Test</span>
                    </div>
                </div>
                <div class="control-group {{ error.getError(assignment, 'assignments.description') }}">
                    <label class="control-label">Description</label>
                    <div class="controls">
                        <textarea rows="6" class="input-block-level" name="description">{{ assignment.getDescription }}</textarea>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Categoty</label>
                    <div class="controls">
                        <select class="input-xlarge" name="assignment_category_id">
                            {% for category in categories %}
                                <option value="{{  category.getId }}" {{ assignment.getAssignmentCategoryId == category.getId ? 'selected' : '' }}>{{  category.getName }}</option>
                            {% endfor %}
                        </select>
                        <a href="#">Create new</a>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Max Points</label>
                    <div class="controls">
                        <input type="text" placeholder="Title..." class="input-micro" value="{{ assignment.getMaxPoints }}" name="max_points">
                        <a href="#">Manage grading</a>
                    </div>
                </div>

                <div class="form-inline">
                    <div class="control-group">
                        <label class="control-label">Due date</label>
                        <div class="controls">
                            <input type="text" class="icon-new-calendar image-background input-small" name="due_at_date" value="{{ assignment.getDueAt }}"/>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">Due time</label>
                        <div class="controls">
                            <input type="text" class="icon-new-clock image-background input-small" name="due_at_time" value="{{ assignment.getDueAt }}"/>
                        </div>
                    </div>
                </div>

                <div class="clearfix"></div>

                <div class="control-group">
                    <label class="control-label">Attachment</label>
                    <div class="controls">
                        <input type="file" class="input-large"/>
                        <div class="help-block">
                            <a href="#">Add another file</a> <span>(Maximum size 5 MB)</span>
                        </div>
                    </div>
                </div>

                <div class="control-group radio-control-group">
                    <label class="control-label">Assign students</label>
                    <div class="controls">
                        <div class="form-inline ">
                            <label class="radio"><input type="radio"/> All</label>
                            <label class="radio"><input type="radio"/> <a href="">Choose from the list</a></label>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <input type="submit" class="btn btn-danger" value="Create" />
                    <input type="reset" class="btn" value="Cancel" />
                </div>
            </form>
        </div>
    </div>
{% endblock %}
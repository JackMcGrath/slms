{% extends 'ZerebralFrontendBundle::layout.html.twig' %}

{% block content %}
    {% javascripts
        '@ZerebralFrontendBundle/Resources/public/js/controllers/course/assignments.js'
        output='js/compiled/course.js' %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

    <div class="top-second-navbar">
        <ul>
            <li><a href="#">Feed</a></li>
            <li class="active"><a href="#">Assignments</a></li>
            <li><a href="#">Details</a></li>
            <li><a href="#">Materials</a></li>
            <li><a href="#">Members</a></li>
        </ul>
    </div>
    <div class="row-fluid assignments-list">
        <div class="span6 main-list-block">
            <div class="row-fluid">
                <h2 class="span6 pull-left form-title">
                    {{ course.name }} <small>Assignments</small>
                </h2>
            </div>
            <hr/>

            <div class="span9 items-list{% if is_granted('ROLE_TEACHER') %} teacher-role{% endif %}">
                {% for assignment in assignments %}
                    <div class="list-item span12">
                        <div class="symbol pull-left">
                            {% if is_granted('ROLE_STUDENT') %}
                                <img class="rounded" src="http://www.gravatar.com/avatar/205e460b479e2e5b48aec07710c08d50?s=48"/>
                            {% else %}
                                <div class="rounded count-badge">2</div>
                            {% endif %}
                        </div>
                        <div class="details pull-left">
                            {% if is_granted('ROLE_TEACHER') %}
                                <div class="manage-buttons invisible">
                                    {% if is_granted('EDIT', assignment) %}<a href="{{ path('assignment_edit', {id: assignment.id, courseId: course.id}) }}"><i class="icon-small-pencil"></i>Edit</a>{% endif %}
                                    {% if is_granted('DELETE', assignment) %}<a href="{{ path('assignment_delete', {id: assignment.id}) }}"><i class="icon-small-trash-bin"></i>Delete</a>{% endif %}
                                    <a href=""><i class="icon-small-people"></i>Edit members</a>
                                </div>
                            {% endif %}
                            <h4><a href="{{ path('assignment_view', {id: assignment.id}) }}">{{ assignment.name }}</a></h4>
                            <div class="stat">
                                {% if is_granted('ROLE_STUDENT') %}
                                    <div class="instructor-name">Instructor <b>{{ assignment.teacher.fullName }}</b></div>
                                    <div class="due-at"><i class="icon-small-clock"></i> Due <small>{{ assignment.dueAt | date('D, M d') }}</small></div>
                                    <div><span class="badge">-</span><a href="#">Comments</a></span></div>
                                {% else %}
                                    <div class="due-at"><i class="icon-small-clock"></i> Due <small>{{ assignment.dueAt | date('D, M d') }}</small></div>
                                    <div><span class="badge">3</span><a href="">Assignments</a></div>
                                    <div><span class="badge">4</span><a href="">Solutions</a></div>
                                    <div><span class="badge badge-inverse">2</span><a href="">Promises</a></div>
                                {% endif %}
                            </div>
                        </div>
                        {% if is_granted('ROLE_STUDENT') %}
                            <div class="grade pull-right text-center">
                                <h4>Grading: {{ assignment.id + 20 }}</h4>
                                {% if assignment.id <= 10 %}
                                    <span class="label label-important">Failed</span>
                                {% else %}
                                    <span class="label label-success">Success</span>
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="right-navbar pull-left">
            {% if is_granted('ROLE_TEACHER') %}
                <a href="{{ path('assignment_add', {courseId: course.id}) }}" class="btn create-new-item create-course">create assignment</a>
                <a href="{{ path('assignments') }}" class="btn create-new-item use-access-code">view all</a>
            {% endif %}
        </div>

    </div>


{% endblock %}
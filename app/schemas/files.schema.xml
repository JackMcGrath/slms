<?xml version="1.0" encoding="utf-8"?>
<database name="default" defaultIdMethod="native" package="user" namespace="Zerebral\BusinessBundle\Model\File" defaultPhpNamingMethod="phpname">
    <table name="files" phpName="File" idMethod="native">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true" required="true" />
        <column name="name" phpName="Name" type="VARCHAR" size="255" required="true" />
        <column name="size" phpName="Size" type="INTEGER" sqlType="int(10) unsigned" required="true" />
        <column name="mime_type" phpName="MimeType" type="VARCHAR" size="30" required="true" />
        <column name="storage" phpName="Storage" type="CHAR" valueSet="local,dropbox,s3" sqlType="enum('local','dropbox','s3')" required="true" defaultValue="local" />
        <column name="created_at" phpName="CreatedAt" type="TIMESTAMP" required="true" />
    </table>
    <table name="file_references" isCrossRef="true">
        <column name="file_id" phpName="fileId" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" required="true" />
        <column name="reference_id" phpName="referenceId" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" required="true" />
        <column name="reference_type" phpName="referenceType" type="CHAR" valueSet="assignment" primaryKey="true" sqlType="enum('assignment')" required="true" />
        <foreign-key foreignTable="files" name="file_references_files" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="file_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="assignments" name="file_references_assignments" onDelete="CASCADE" onUpdate="CASCADE">
            <reference local="reference_id" foreign="id"/>
        </foreign-key>
    </table>
</database>